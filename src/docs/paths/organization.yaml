/api/organizations:
  post:
    summary: Create a new organization
    tags:
      - Organization
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: The name of the new organization.
              description:
                type: string
                description: An optional description for the organization.
            required:
              - name
          example:
            name: "Awesome Inc."
            description: "The most awesome company in the world."
    responses:
      '201':
        description: Organization created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
                data:
                  type: object
                  properties:
                    id:
                      type: string
                      format: uuid
                    name:
                      type: string
                    code:
                      type: string
            example:
              success: true
              message: "Organization created"
              data:
                id: "clx123abcde"
                name: "Awesome Inc."
                code: "AWSM-1234"
      '400':
        description: Invalid request body or validation error.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                error:
                  type: string
              example:
                success: false
                error: "Validation error: Name is too short."

  get:
    summary: Get all organizations for the current user
    tags:
      - Organization
    security:
      - bearerAuth: []
    responses:
      '200':
        description: A list of the user's organization memberships.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      orgId:
                        type: string
                        format: uuid
                      organization:
                        type: object
                        properties:
                          id:
                            type: string
                            format: uuid
                          name:
                            type: string
                      role:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
            example:
              success: true
              data:
                - orgId: "org-abc"
                  organization:
                    id: "org-abc"
                    name: "Awesome Inc."
                  role:
                    id: 1
                    name: "ADMIN"

/api/organizations/{id}:
  get:
    summary: Get details for a specific organization
    tags:
      - Organization
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The ID of the organization to retrieve.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Detailed information about the organization.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
            example:
              success: true
              data:
                id: "org-abc"
                name: "Awesome Inc."
                members:
                  - user:
                      id: "user-123"
                      name: "John Doe"
                      email: "john@example.com"
                    role:
                      id: 1
                      name: "ADMIN"
      '403':
        description: Forbidden. User is not a member.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

  put:
    summary: Update an organization's details
    tags:
      - Organization
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The ID of the organization to update.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
              description:
                type: string
          example:
            name: "Even More Awesome Inc."
            description: "Updated description."
    responses:
      '200':
        description: Organization updated successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
                data:
                  type: object
            example:
              success: true
              message: "Organization updated"
              data:
                id: "org-abc"
                name: "Even More Awesome Inc."
      '403':
        description: Forbidden. User does not have permission.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

/api/organizations/{id}/members:
  get:
    summary: Get all members of an organization
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: A list of organization members.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: array
                  items:
                    $ref: '#/components/schemas/OrganizationMember'
            example:
              success: true
              data:
                - userId: "user-456"
                  orgId: "org-abc"
                  roleId: 2
                  user:
                    id: "user-456"
                    name: "Jane Doe"
                    email: "jane@example.com"
                  role:
                    id: 2
                    name: "MANAGER"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."
  post:
    summary: Add a member to an organization
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
                format: email
              roleId:
                type: integer
            required:
              - email
              - roleId
          example:
            email: "new.member@example.com"
            roleId: 2
    responses:
      '201':
        description: Member added successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
                data:
                  type: object
            example:
              success: true
              message: "Member invited"
              data:
                userId: "user-456"
                orgId: "org-abc"
                roleId: 2
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

/api/organizations/{id}/members/{memberId}:
  put:
    summary: Update a member's role
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: memberId
        in: path
        required: true
        description: The user ID of the member to update.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              roleId:
                type: integer
            required:
              - roleId
          example:
            roleId: 3
    responses:
      '200':
        description: Member role updated successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: true
                message: "Member role updated"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

  delete:
    summary: Remove a member from an organization
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: memberId
        in: path
        required: true
        description: The user ID of the member to remove.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Member removed successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: true
                message: "Member removed"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

/api/organizations/{id}/divisions:
  post:
    summary: Create a new division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
            required:
              - name
          example:
            name: "Engineering"
    responses:
      '201':
        description: Division created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
            example:
              success: true
              data:
                id: "div-xyz"
                orgId: "org-abc"
                name: "Engineering"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."
  get:
    summary: Get all divisions in an organization
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: A list of the organization's divisions.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: array
                  items:
                    type: object
            example:
              success: true
              data:
                - id: "div-xyz"
                  orgId: "org-abc"
                  name: "Engineering"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

/api/organizations/{id}/divisions/{divId}:
  get:
    summary: Get details for a specific division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: divId
        in: path
        required: true
        description: The division ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Detailed information about the division.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
            example:
              success: true
              data:
                id: "div-xyz"
                orgId: "org-abc"
                name: "Engineering"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

  put:
    summary: Update a division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: divId
        in: path
        required: true
        description: The division ID.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
            required:
              - name
          example:
            name: "Software Engineering"
    responses:
      '200':
        description: Division updated successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
                data:
                  type: object
            example:
              success: true
              message: "Division updated"
              data:
                id: "div-xyz"
                name: "Software Engineering"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

  delete:
    summary: Delete a division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: divId
        in: path
        required: true
        description: The division ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Division deleted successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: true
                message: "Division deleted"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

/api/organizations/{id}/projects:
  post:
    summary: Create a new project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              projectName:
                type: string
              budgetAllocated:
                type: number
              divisionId:
                type: string
                format: uuid
            required:
              - projectName
              - budgetAllocated
              - divisionId
          example:
            projectName: "Project Phoenix"
            budgetAllocated: 50000
            divisionId: "div-xyz"
    responses:
      '201':
        description: Project created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
                data:
                  type: object
            example:
              success: true
              message: "Project created"
              data:
                id: "proj-123"
                projectName: "Project Phoenix"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

  get:
    summary: Get all projects in an organization
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: A list of projects in the organization.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: array
                  items:
                    type: object
            example:
              success: true
              data:
                - id: "proj-123"
                  orgId: "org-abc"
                  divisionId: "div-xyz"
                  projectName: "Project Phoenix"
                  budgetAllocated: 50000
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

/api/organizations/{id}/projects/{projId}:
  get:
    summary: Get details for a specific project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: projId
        in: path
        required: true
        description: The project ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Detailed information about the project.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: object
            example:
              success: true
              data:
                id: "proj-123"
                orgId: "org-abc"
                divisionId: "div-xyz"
                projectName: "Project Phoenix"
                budgetAllocated: 50000
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

  delete:
    summary: Delete a project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: projId
        in: path
        required: true
        description: The project ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: Project deleted successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: true
                message: "Project deleted"
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You do not have the required permission."

/api/organizations/{id}/divisions/{divId}/projects:
  get:
    summary: Get all projects within a specific division
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        description: The organization ID.
        schema:
          type: string
          format: uuid
      - name: divId
        in: path
        required: true
        description: The division ID.
        schema:
          type: string
          format: uuid
    responses:
      '200':
        description: A list of projects filtered by division.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                data:
                  type: array
                  items:
                    type: object
            example:
              success: true
              data:
                - id: "proj-123"
                  orgId: "org-abc"
                  divisionId: "div-xyz"
                  projectName: "Project Phoenix"
                  budgetAllocated: 50000
      '403':
        description: Forbidden.
        content:
          application/json:
            schema:
              type: object
              properties:
                success:
                  type: boolean
                message:
                  type: string
              example:
                success: false
                message: "Forbidden: You are not a member of this organization."

