# /api/organizations

/api/organizations:
  post:
    summary: Create a new organization
    tags:
      - Organization
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateOrgRequest'
    responses:
      '201':
        description: Organization created successfully
      '400':
        description: Invalid request body or validation error

  get:
    summary: Get all organizations for the current user
    tags:
      - Organization
    security:
      - bearerAuth: []
    responses:
      '200':
        description: A list of organizations the user is a member of

/api/organizations/{id}:
  get:
    summary: Get details for a specific organization
    tags:
      - Organization
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The ID of the organization to retrieve.
    responses:
      '200':
        description: Detailed information about the organization.
      '400':
        description: Access denied or organization not found.

  put:
    summary: Update an organization's details
    tags:
      - Organization
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The ID of the organization to update.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateOrgRequest'
    responses:
      '200':
        description: Organization updated successfully.
      '400':
        description: Validation error or insufficient permissions.

# /api/organizations/{id}/members

/api/organizations/{id}/members:
  post:
    summary: Add a member to an organization
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AddMemberRequest'
    responses:
      '201':
        description: Member added successfully.
      '400':
        description: User not found, already a member, or insufficient permissions.

/api/organizations/{id}/members/{memberId}:
  put:
    summary: Update a member's role
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: memberId
        schema:
          type: string
        required: true
        description: The user ID of the member to update.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateMemberRoleRequest'
    responses:
      '200':
        description: Member role updated successfully.
      '400':
        description: Member not found or insufficient permissions.

  delete:
    summary: Remove a member from an organization
    tags:
      - Organization Members
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: memberId
        schema:
          type: string
        required: true
        description: The user ID of the member to remove.
    responses:
      '200':
        description: Member removed successfully.
      '400':
        description: Member not found or insufficient permissions.

# /api/organizations/{id}/divisions

/api/organizations/{id}/divisions:
  post:
    summary: Create a new division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateDivisionRequest'
    responses:
      '201':
        description: Division created successfully.
      '400':
        description: Validation error or insufficient permissions.
  get:
    summary: Get all divisions in an organization
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
    responses:
      '200':
        description: A list of the organization's divisions.

/api/organizations/{id}/divisions/{divId}:
  get:
    summary: Get details for a specific division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: divId
        schema:
          type: string
        required: true
        description: The division ID.
    responses:
      '200':
        description: Detailed information about the division.
      '400':
        description: Division not found.
  put:
    summary: Update a division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: divId
        schema:
          type: string
        required: true
        description: The division ID.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateDivisionRequest'
    responses:
      '200':
        description: Division updated successfully.
      '400':
        description: Division not found or insufficient permissions.
  delete:
    summary: Delete a division
    tags:
      - Organization Divisions
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: divId
        schema:
          type: string
        required: true
        description: The division ID.
    responses:
      '200':
        description: Division deleted successfully.
      '400':
        description: Division not found or insufficient permissions.

# /api/organizations/{id}/projects

/api/organizations/{id}/projects:
  post:
    summary: Create a new project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CreateProjectRequest'
    responses:
      '201':
        description: Project created successfully.
      '400':
        description: Division not found or insufficient permissions.
  get:
    summary: Get all projects in an organization
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
    responses:
      '200':
        description: A list of projects in the organization.

/api/organizations/{id}/projects/{projId}:
  get:
    summary: Get details for a specific project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: projId
        schema:
          type: string
        required: true
        description: The project ID.
    responses:
      '200':
        description: Detailed information about the project.
      '400':
        description: Project not found.
  delete:
    summary: Delete a project
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: projId
        schema:
          type: string
        required: true
        description: The project ID.
    responses:
      '200':
        description: Project deleted successfully.
      '400':
        description: Project not found or insufficient permissions.

/api/organizations/{id}/divisions/{divId}/projects:
  get:
    summary: Get all projects within a specific division
    tags:
      - Organization Projects
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: The organization ID.
      - in: path
        name: divId
        schema:
          type: string
        required: true
        description: The division ID.
    responses:
      '200':
        description: A list of projects filtered by division.
